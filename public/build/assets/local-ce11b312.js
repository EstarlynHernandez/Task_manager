document.onload=f();function f(){d(),p(),S()}function p(){document.querySelectorAll(".checked"),document.querySelectorAll(".delete");let t=document.querySelector(".shadow"),c=document.querySelector("#content"),s=document.querySelector(".create"),e=document.querySelector(".taskCreate");e.onsubmit=l=>{if(l.preventDefault(),document.querySelector("#name").value.length>3){let n={complete:!1,title:document.querySelector("#name").value,details:document.querySelector("#details").value};h(n),s.classList.add("dnone"),t.classList.add("dnone"),c.classList.remove("blur")}}}function S(){let t=document.querySelector(".create"),c=document.querySelectorAll(".closeTab"),s=document.querySelector(".createTab"),e=document.querySelector("#content"),l=document.querySelector("#openMenu"),n=document.querySelector(".shadow");l&&(l.onclick=()=>{e.classList.add("blur"),t.classList.add("dnone"),n.classList.remove("dnone")}),c.forEach(a=>{a.onclick=()=>{t.classList.add("dnone"),n.classList.add("dnone"),e.classList.remove("blur")}}),s.onclick=()=>{t.classList.remove("dnone"),n.classList.remove("dnone"),e.classList.add("blur")}}function d(){let t=localStorage.getItem("task");if(t){let c=JSON.parse(t);c.forEach(s=>{k(s,c)})}v(".task")}function k(t,c){let s=document.querySelector(".tasks"),e=document.createElement("li"),l=document.createElement("div"),n=document.createElement("img"),a=document.createElement("div"),u=document.createElement("p"),m=document.createElement("div"),o=document.createElement("div"),r=document.createElement("h3"),i=document.createElement("p");r.innerText=t.title,r.classList.add("task__title"),i.innerText=t.details,i.classList.add("task__text"),o.appendChild(r),o.appendChild(i),o.classList.add("task__info"),n.setAttribute("src","icons/circle.svg"),n.setAttribute("alt","not found"),n.classList.add("task__checked","checked"),n.onclick=()=>{y(t,c)},u.innerText="Delete",a.classList.add("task__delete","delete"),a.appendChild(u),a.onclick=()=>{L(t,c)},l.classList.add("task"),e.classList.add("tasks__list"),t.complete&&(e.classList.add("task__complete"),n.setAttribute("src","icons/complete.svg")),l.appendChild(n),l.appendChild(o),l.appendChild(m),e.appendChild(l),e.appendChild(a),s.appendChild(e)}function h(t){let c=document.querySelector(".tasks"),s=localStorage.getItem("task");if(s==null){let e=JSON.stringify([t]);localStorage.setItem("task",e)}else{let e=JSON.parse(s);e.push(t),localStorage.setItem("task",JSON.stringify(e))}c.innerHTML=" ",d()}function y(t,c){let s=document.querySelector(".tasks");c.filter(e=>(e===t&&(e.complete=!e.complete),e)),s.innerHTML=" ",localStorage.setItem("task",JSON.stringify(c)),d()}function L(t,c){let s=document.querySelector(".tasks"),e=c.filter(l=>l===t?null:l);s.innerHTML=" ",localStorage.setItem("task",JSON.stringify(e)),d()}function v(t){let c=document.querySelectorAll(t),s,e,l;c.forEach(n=>{n.addEventListener("touchstart",a=>{e=!0,s=a.touches[0].screenX}),n.addEventListener("touchmove",a=>{e&&(l=a.touches[0].screenX-s,l>-120&&l<5&&(n.style="left:"+l+"px"))}),n.addEventListener("touchend",()=>{e=!1,l<-30?n.style="left: -80px":n.style="left: 0px"})})}
